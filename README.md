# Telegram Final PDF Dossier Bot 

**Заказчик:** [YOU CAN](https://youcan.by) — белорусский социальный стартап, помогающий подросткам, в особенности сиротам, найти своё призвание и максимально реализовать свои способности через профдизайн.

Проект создан для автоматизации этапа консультации, в рамках которого профдизайнер анализирует результаты тестирования и формирует образовательную траекторию для каждого ребёнка. Сейчас профдизайнер тратит много времени на ручное оформление голосовых сообщений и текстовых описаний, а наша система позволяет с помощью искусственного интеллекта генерировать персонализированный PDF-досье за 2 часа.

---

## Оглавление

1. [Описание проекта](#описание-проекта)
2. [Технологический стек](#технологический-стек)
3. [Особенности реализации](#особенности-реализации)
4. [Требования](#требования)
5. [Установка](#установка)
   - [Локальный запуск через Docker Compose](#локальный-запуск-чрез-docker-compose)
6. [Использование](#использование)
7. [Структура проекта](#структура-проекта)
8. [Контакты](#контакты)

---

## Описание проекта

Проект предназначен для автоматизированного профдизайна подростков. Система принимает результаты тестирования (формат PDF), автоматически обрабатывает их с помощью локально развернутой языковой модели и генерирует персонализированное досье. В досье содержатся разделы:

1. **Профессиональные склонности**
2. **Личностные особенности**
3. **Ценностные ориентиры**
4. **Скрытые таланты**

Данный инструмент позволяет значительно сократить время подготовки консультации, оставляя профдизайнеру лишь финальную проверку и учет человеческих факторов.

Проект реализован в виде Telegram-бота, который принимает от пользователей PDF-файлы, обрабатывает их и возвращает результат в виде готового документа. Для анализа данных бот взаимодействует с локально развернутым LLM-сервисом (Large Language Model), что позволяет автоматически генерировать подробное описание результатов тестирования, адаптированное под каждого подростка, сокращая время консультации до пары часов.

---

## Технологический стек

- **Языки и среды:**
  - Python 3.10
  - Docker / Docker Compose
  - Ubuntu 22.04 (для LLM-сервиса)

- **Telegram-бот:**
  - [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot) (версии 20+)
  - asyncio

- **Работа с PDF:**
  - pdfplumber – извлечение текста из PDF
  - ReportLab – генерация PDF-документов
  - Emojipy – добавление emoji в текст

- **Интеграция с LLM:**
  - langchain_ollama – взаимодействие с локально запущенной языковой моделью Ollama
  - Ollama – локальное развертывание модели YandexGPT-5-Lite-8B-instruct-GGUF

- **Утилиты:**
  - subprocess, re, logging, pathlib, os

---

## Особенности реализации

- **Персонализированный PDF-отчет:**  
  Генерация итогового досье по результатам тестирования, адаптированного под каждого подростка.
  
- **Интеграция с Telegram:**  
  Бот принимает PDF-файл, обрабатывает его и возвращает пользователю готовый файл с результатами.
  
- **Локальный LLM-сервис:**  
  Использование модели YandexGPT-5-Lite-8B-instruct-GGUF через Ollama для генерации текстовой части отчёта.
  
- **Контейнеризация:**  
  Проект разделён на два сервиса:
  - **llm_service:** запускает Ollama и модель;
  - **telegram_bot:** реализует логику Telegram-бота.
  
- **Автоматизация консультаций:**  
  Сокращение времени консультации до 2 часов за счет автоматической генерации итоговых документов.

---

## Требования

- **Docker** (версия 20.10+)
- **Docker Compose** (версия 1.27+)
- Переменная окружения:
  - `TELEGRAM_BOT_TOKEN` — токен для доступа к Telegram Bot API

Список зависимостей Python находится в файле [requirements.txt](requirements.txt).

---

## Установка

### Локальный запуск через Docker Compose

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/danielnru/final_pdf_dossier.git
   cd final_pdf_dossier
   ```

2. **Создайте файл `.env`:**  
   На основе примера `.env.example` укажите переменную:
   ```bash
   cp .env.example .env
   # затем отредактируйте .env и установите TELEGRAM_BOT_TOKEN
   ```

3. **Запустите сервисы:**
   ```bash
   docker-compose up --build
   ```

   Команда соберёт и запустит два контейнера:
   - **llm_service:** запускает Ollama и модель.
   - **telegram_bot:** реализует Telegram-бота, который обращается к LLM-сервису.

4. **Проверьте работу контейнеров:**  
   Убедитесь, что сервисы запущены и бот готов к приему сообщений в Telegram.

---

## Использование

1. **Запустите Telegram-бота:**  
   Найдите бота в Telegram по его названию
2. **Начните общение:**  
   Отправьте команду `/start` для получения приветственного сообщения.

3. **Отправьте PDF-файл:**  
   Бот загрузит документ, обработает его с использованием LLM-сервиса и вернет готовый PDF-файл с расшифровкой результатов тестирования.

---

## Структура проекта

```
youcan-profdesign/
├── llm_service/              # Сервис для работы с Ollama и LLM (Dockerfile, entrypoint.sh)
├── telegram_bot/             # Исходный код Telegram-бота (main.py, pdf_processor.py, requirements.txt и др.)
├── downloads/                # Каталог для временного хранения файлов (можно добавить .gitkeep)
├── .env.example              # Пример файла с переменными окружения
├── docker-compose.yaml       # Конфигурация Docker Compose для запуска llm_service и telegram_bot
├── README.md                 # Описание проекта (этот файл)
└── .gitignore                # Файл для исключения временных файлов и папок из репозитория
```

---

## Контакты

**Разработчик:**  
Мельник Даниил Владимирович  
- **Email:** git@danieln.ru  
- **GitHub:** [DanielNRU](https://github.com/DanielNRU)  

---